---
slug: introducing-cube-factory
title: "Introducing Cube Factory: Effortless Datacube Generation"
authors: [durkin]
# image: https://fused-magic.s3.us-west-2.amazonaws.com/blog-assets/
unlisted: true
---


Machine learning in remote sensing has always been a data-intensive endeavor. The challenges of acquiring, processing, and organizing multispectral and geospatial data can be daunting, often requiring significant time and expertise. But what if there was a way to simplify this process, allowing you to focus on developing powerful machine learning models without the overhead of data wrangling?

Enter [Cube Factory](https://www.fused.io/workbench/apps#app/s/i/fa_57r45jFxtCuihNqx5brtd9), an innovative yet simple app built using Fused.io that is a tool for dataset creation that was built over a weekend in the fused app engine. Note that this is just a demonstration, everything we have built here is endlessly customizable and can be expanded or refined based on your needs.

{/* truncate */}



[...]

_Pseudo-RGB Image of Santa Maria, California composed from Sentinel 2 data, with red channel mapped to Glacier Index (normalized difference of Bands 3 and 4), Green  is Band 11 (SWIR) and Blue is Band 8 (NIR)._


## The Vision Behind Cube Factory
The primary goal of Cube Factory is to make the creation of datacubes—or image chips—effortless and intuitive. By leveraging the capabilities of Fused.io, Cube Factory enables users to:
- Select and visualize multiple data layers side by side.
- Interactively draw regions of interest directly on a map.
- Automatically generate and export datacubes containing selected layers for offline processing.

Whether you’re working on environmental monitoring, agricultural analysis, or geospatial intelligence, Cube Factory streamlines the data preparation phase, allowing you to accelerate your machine learning projects.

[...]
_Example Data Cube: 3 Image Bands and 1 Target (Cropland Data) Layer sandwiched together._


## Key Features

### 1. Interactive Map Exploration
At the heart of Cube Factory is an interactive map interface powered by Folium and Streamlit. Users can:
- Search for locations using the built-in geocoder.
- Visualize different data layers such as Sentinel-1, Sentinel-2, Digital Elevation Models (DEM), and Land Use Land Cover (LULC) maps.
- Compare layers side by side, enabling a deeper understanding of the data.

### 2. Customizable Data Layers
Cube Factory offers a rich selection of input and target layers:

- Sentinel-2 Bands: 13 in total, from coastal aerosol, visible RGB bands to Near Infrared and Shortwave bands
- Digital Elevation Models: Gain insights into terrain and elevation.
- Cropland Data Layer (CDL): Essential for agricultural analysis.
- Mask2Former (ML): Leverage advanced machine learning masks that are generated in real time via a model endpoint hosted on Hugging Face.
- International LULC: Understand land use patterns globally, fewer granular classes than the CDL but greater coverage.

Users can select bands for the Red, Green, Blue, and Alpha channels, customizing the data according to their specific needs.

### 3. Dynamic Survey Period Selection

Temporal analysis is crucial in remote sensing. Cube Factory allows users to define the survey period by selecting the year and month, facilitating time-series analysis and ensuring the data aligns with the project’s temporal requirements.

### 4. Effortless Region Selection
Using intuitive drawing tools, users can:
- Draw polygons or rectangles directly on the map to define areas of interest.
- Highlight overlapping map tiles, which are essential for generating the datacubes.
- Visualize selected tiles, ensuring the right data is captured.

### 5. Seamless Datacube Generation

Once the regions are selected:
- Cube Factory collects all overlapping tiles and packages them into a GeoDataFrame.
- Users can export these tiles, complete with metadata about the selected layers.
- The exported data is saved as a Parquet file and uploaded using Fused.io's API, enabling batch processing offline of the curated datacube collection. The data can be stored in Fused or exported to hugging face platform, to be shared with the geospatial community.

[...]

_Cube Factory: User Interface._


## Example Real-World Applications

### 1. Sensor Translation
- Objective: Generate human-interpretable, cloud-free true-color images from radar data.
- Method: Use Sentinel-1 bands as inputs and Sentinel-2 RGB bands as targets.
- Outcome: Develop models that translate radar imagery into clear, cloudless optical images, overcoming the limitations of cloud cover in optical sensors.

### 2. Land Use and Crop Classification
- Objective: Classify land use and identify crop types for agricultural monitoring.
- Method: Use selected Sentinel-2 bands as inputs and the Cropland Data Layer as the target.
- Outcome: Create segmentation models that accurately classify different land uses, aiding in crop yield prediction, deforestation tracking, and environmental management.

## Why Fused?
Fused serves as the backbone of Cube Factory, providing:
- Robust Data Handling: Efficiently manage large geospatial datasets.
- Scalable Processing: Handle batch jobs for datacube generation without performance bottlenecks.
- Easy Integration: Seamlessly integrate with tools like Streamlit and Folium for a smooth user experience.

By utilizing Fused, Cube Factory not only simplifies the data preparation process but also ensures that the generated datacubes are ready for immediate use in machine learning models.

Fused User Defined Functions (UDFs) sit one layer down from the Cube Factory app - when called they are responsible for extracting and transforming the source data, e.g. Sentinel 2 imagery. Or in the case of ML inference, a Fused UDF pulls the satellite image data, next it makes an API call to the Hugging Face model endpoint where a trained transformer model makes a prediction on the image. This prediction is returned to the UDF, which passes it in turn on to the Fused streamlit app.

## Getting Started with Cube Factory
Ready to streamline your geospatial machine learning projects? Here’s how you can get started:
1. Access the Cube Factory App: Fused Streamlit App
2. Explore the Map: Use the search functionality to find your area of interest.
3. Select Data Layers: Customize your input and target layers according to your project needs (left and right side of map)
4. Draw Regions of Interest: Use the drawing tools to select specific areas on the map. Tiles selected in this way will be highlighted in cyan.
5. Generate Datacubes: Export your selected tiles and layers for offline processing via the “Export Tiles” button below the map.

6. The tiles will be saved along with the input and target layer information as  a parquet file in Fused File Explorer, with last searched location and current datetime added to filename for versioning

[...]

[...]


## Conclusion
Cube Factory represents a significant step forward in simplifying the often complex process of preparing geospatial data for machine learning. By bringing together powerful tools and intuitive interfaces, it empowers users to focus on what truly matters—developing models that can make a difference.

Whether you’re tackling challenges like deforestation monitoring, flood prediction, or crop yield estimation, Cube Factory and Fused.io provide the foundation you need to accelerate your research and applications.

---
Discover the future of geospatial data processing with Cube Factory and Fused.io. Try it out today and unlock new possibilities in your machine learning projects.
