---
title: Leaflet
sidebar_label: Leaflet
path: basics/out/leaflet/leaflet
nb_path: basics/out/leaflet.ipynb
github: https://github.com/fusedio/notebooks/blob/main/public/noaa.ipynb
colab: https://githubtocolab.com/fusedio/notebooks/blob/main/public/noaa.ipynb
---

import LinkButtons from "../../../../src/components/LinkButtons.jsx";
import CellOutput from "../../../../src/components/CellOutput.jsx";
import {BokehFigure, PlotlyFigure} from "../../../../src/components/Plotting.jsx";

<LinkButtons
  githubUrl="https://github.com/fusedio/notebooks/blob/main/public/noaa.ipynb"
  colabUrl="https://githubtocolab.com/fusedio/notebooks/blob/main/public/noaa.ipynb"
/>

# Leaflet

Fused can be used to display responsive Tile maps in Jupyter Notebooks with the
`ipyleaflet` library.

![alt text](https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/gifs/leaflet.gif)

Follow these steps to embed a map into a Notion page.

```python
# !pip install fused leaflet
```

## 1. Create UDF in Workbennch

Create a UDF in Workbench, and generate a signed URL to use as an endpoint its endpoint.

```python
from fused.api import FusedAPI
api = FusedAPI()

# Create a new UDF access token using its unique token string.
token_object = api.create_udf_access_token(udf_email="user@fused.io", udf_name="CDLs_Tile_Example")

# Generate a URL
url = token_object.get_tile_url()
url
```

## 2. Create a Leaflet map, with a TileLayer

Modify the signed url to introduce ZXY Tile parameters (`{{z}}/{{x}}/{{y}}`) as well
query strings for other UDF-specific parameters (`?crop_type={crop_type}`) as shown in
the example.

```python
import ipyleaflet

crop_type='almond'
m = ipyleaflet.Map(center=(37.316, -120.69), zoom=10, basemap=ipyleaflet.basemaps.CartoDB.PositronOnlyLabels)
l = ipyleaflet.TileLayer(
    url=f'https://app-staging.fused.io/server/v1/realtime-shared/fce1c75c21a228b7eb067aa387f573196034d9707d78c85c32c363fc88ef4d4e/run/tiles/{{z}}/{{x}}/{{y}}?crop_type={crop_type}',
    tile_size=512,
    zoom_offset=-1,
    cross_origin=True,
    show_loading=True,
)
m.add_layer(l)
m
```

<CellOutput>
{
  `Map(center=[37.316, -120.69], controls=(ZoomControl(options=['position', 'zoom_in_text', 'zoom_in_title', 'zooâ€¦`
}
</CellOutput>

```python

```

