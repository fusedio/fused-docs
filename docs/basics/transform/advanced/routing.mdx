# Routing

```python
@fused.udf
def udf(lat_start = 34.0154145, lng_start = -118.2253804, lat_end = 33.9422, lng_end = -118.4036, cost = 'auto'): 
    import time
    import pandas as pd
    import geopandas as gpd
    from shapely.geometry import Point
    
    from utils import get_route, compute_distance
    
    start = time.time()
    gdf = get_route(lat_start, lng_start, lat_end, lng_end, costing = cost)
    
    print('time to create route',time.time()-start, 'sec')
    gdf = compute_distance(gdf, col_name = 'separation')
    print('route length:',gdf['separation'].values[0]/1000.,'km')
    gdf['r']=0
    gdf['g']=255
    gdf['b']=255
    gdf_start = gpd.GeoDataFrame(columns = ['geometry', 'r','g','b'],geometry = [Point(lng_start,lat_start)], crs = 4326)
    gdf_start['g']=255
    
    gdf_end = gpd.GeoDataFrame(columns = ['geometry', 'r','g','b'],geometry = [Point(lng_end,lat_end)], crs = 4326)
    gdf_end['r']=255
    return pd.concat([gdf,gdf_start,gdf_end]) 

```

import Iframe from '@site/src/components/Iframe';


<Iframe url="https://staging.fused.io/workbench#app/s/aH4sIAAAAAAAAA32VbW%2FqNhTHv4qV%2B6IgcakDeQCkvOjacaWuk6rLthcjFXLiE7AIdmab9rKq330nxAmUsVlIcXx%2BOed%2FfI7Nu5crDt7ME7tKaUuqA4d8S5ghFd%2Bm0q0aq4HtSmFrg7HderE3wFesqrqVNaiKSY4Y%2FtYVT2UqjR1aYUvopd53tbdCrlOvXxtS%2BYU8QCEkELsBwkVuhZJMH8ibsBtSlSwHdCR5bRaa5EppLiSzYFL5%2FHR3%2F%2FOCJOQ9lQTHzU9aqW15kORPpW5mZBnQYRRTOiBf4%2FFwirOXgSOfQUqysKyO5sg4pJEjp%2BOwIx%2FZjomcXcKUBg08oZO4g%2B9BWs1K8sz0tiUnoe%2FcRpPxSYBWpoLcnqNRREctOj1pfZz%2FQu6Erje3BQN%2F3IBxPPE78Onb3QUYx9HUyYyDk8c57qDMBQp9EFhY3PQurTis%2BWBIff8k9ldgtmL5Fuv2ry8COnZf0Dh%2BSeVHU9RF1y8GyjrPTP0ghdKupKk8PlcMq4fN0TCIYIMsGt5Ypu0s9QakxIi9ptbDLRxMr98%2F9k69vsrQwRWgtQ417NQr9Fy0fhs3%2B8%2B4rFHYRV5lfdemwqDl4PIB3nDH3hTWfO5MdP2mhYVekXpzrXbk3Qn4IFa1L9mHOwRfyPe9JL8%2FzFE1s6tj5hhcrpspSm2SWzonLw0HkjcUTi6ZDBmrtiCTG%2FDHEY%2F4JMvieMTCGMKMj4COIaQwGRcZBFAEccwzv6B5nEdZ4EcsGGXhNGJh7vObVPIC%2FXcnfaj3snd0juFbvck15Uk3a0gUmlwqT9zT7cQ9to0FsmPVcReby2iVb9BHr%2BlGvJWGD7joXuuBNIY5lJCkHs6xnrPb2%2BOCuW3ebzkes6%2BvU6zq6TMhhcVDsHoV8FbLtJDUzv%2FA1%2Fq0w1mEeqByYfcczlK9AJRcO6LL%2BzPxt1K7ZHqxWAmbbxJ6tto%2Fm2PLgTbJ8uIb1PlUWy401iP1voF6NEoegU8Zt4MzyxJeXLHg4cbK8uQ3vYcr5jXYVYm39epNcLtJQkr%2FD8pVqXSyHIUDP6CDUdjdQNcSbW3YCH1v4Gn4ay%2Fw9OKNarzZ0uv%2BVpwNjK2nP5jW7ICTA9MlPpqG8V4GnjDzfVkucg0gvVnBSgMf%2FwB8ZlyT7AYAAA%3D%3D"/>
