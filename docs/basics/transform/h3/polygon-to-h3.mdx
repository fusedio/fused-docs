# Polygon to H3

```python
import json

polygon_geojson = json.dumps({"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[12.50941466914121,55.61314057121607],[12.551917009798633,55.641534450684375],[12.578216222960675,55.670499888051104],[12.601538993332422,55.68527493380921],[12.607744529176097,55.69877102857819],[12.630669250504534,55.69938719986775],[12.650204292459732,55.6778309185751],[12.651449190116441,55.67050628289262],[12.645994982257738,55.665777892227105],[12.648904616796083,55.658237842581734],[12.654877207819986,55.64882180872752],[12.661698606961124,55.637382143184],[12.687912644064143,55.63036938110036],[12.686342811804765,55.60568388216573],[12.676129913631213,55.60243881487426],[12.676421968880307,55.597018416141886],[12.685986880254442,55.587162650227235],[12.664409271213943,55.57881089695569],[12.653645079148726,55.5771795439842],[12.635117657607855,55.57452755403997],[12.614627953586403,55.56052782715986],[12.594614686455179,55.55189679028936],[12.558074555847424,55.55957293453141],[12.553423539140512,55.57051412926095],[12.53957998228673,55.56973079937263],[12.52847080799777,55.57160602887093],[12.508032242665193,55.59215118158121],[12.505325217730187,55.608099723147085],[12.50941466914121,55.61314057121607]]]}}]})

@fused.udf
def udf(polygon_geojson=polygon_geojson, h3_size=8):
    import geopandas as gpd
    import h3
    import json

    # Define polygon from input geojson
    gdf = gpd.GeoDataFrame.from_features(json.loads(polygon_geojson))

    # Polyfill
    gdf['hex'] = gdf.geometry.apply(lambda geom: list(h3.geo_to_cells(geom.__geo_interface__, h3_size)))
    gdf_exploded = gdf.explode('hex').reset_index(drop=True)
    gdf_exploded = gdf_exploded.dropna(axis=0, subset='hex')

    return gdf_exploded[['hex']]
```

import Iframe from '@site/src/components/Iframe';



<Iframe url="https://staging.fused.io/workbench#app/s/aH4sIAAAAAAAAA9VXa2%2FbNhT9K4I2IDHgJnw%2FDBjY0C7ohwztlm5AERmGatGOFlnSJLqNF%2BS%2F71CUvLTo0H1dHETk1eF9nnvNPKabpnDpIi33bdP5pD0WbnOf5H3SFvdZPUp737l8X5U%2BvOj9Sb499K5Y5217kuxc0%2BZ1ARh%2Bd22R1eHT%2Bwtf%2BsqdZ%2BnbpjrumjrxTfKaZ%2BksvH57%2FePLn26SZfKY1Ql%2Bzl42ravv8p2rzxaTcHgB9X%2F0TZBmafg8Zqk%2Fti5LF1l65XJ%2F6NzLpqrcxpdNnaXzLN1GaQ%2FI7VfQA6btYK%2Fz5YB6fIIEdvbOd8ewf3ZodH44tGmarijr3Efdt7eUXUhiBRVKWSooo3MpLxTlVBCpsVVEr%2BYDSlJLNSFWW6M4H2CCSi6EJMoIruWI0wanGGNWEaXlgNNEWGuMIZJSIiJOERw21nLOmWBswBnJtIDEEMvoBNMaJhhsK9geYNZoTQkzMEXtCOMEATBJJBHwKcIsN5rCsNKTc0oSRgSzTEireTSqteHEUmiTk01JhbDUEkqVEHQMAWEyw4xlio0wKLHCGsak1twMMIWlBoYxeDgZFcYSoajSSImJmZOGcW0Ek4ZqPmVECgTGSIgKTscMG2TTEKOZlpNZaMJroqyilMVQOewzKjg1ky6jLWXwnqBIItrkhCukBCXAYoIpLhhEhgitYrGIVIYHs4iFjzCtKLOWcsVBiaiNMAEUhcuCqRNMMGpVqDQnQ62QZgKnqAK3jDlZlQgAICaFEEMVJCqlWCgP04xPiQv%2BWxZoyG0MAiU3lBirrJRqqr3kKAVBwHCGqQjTVFspuEWOJ4aAfIgRNNJGyogCsbSUgnBrR5rDUcVwlEujIB9gSAkDqzUNbo8styIggUFfaDvAJIVf2oKYdsqvlIbACB4CaRIRZqVmloOmyMkEQxW45DZ0HY0JAeFCP4JuxE6txXHUBsKB0qNroDEitxyBj8WSDMaICVJwMepCG6NgxmhiJxQQnKHzQFlqozI0HXJkKEg5tR8aijPJKAiOOsb2w0moZnAfZibXvjVDVqunp9VTnH%2FzZ7OxqndV7jEaz0ct09lZBD2N4LOf87qs8v%2FVZCUXFpMFfGXIDBg7pwI9IgODORpK2rFkAacpOlOjW6WIOIM%2BRyUtyISaTDhJQiuEDsNQGHAQYWxSahnn42ylFySMW8o5tRIVGXCYjmhVjUa3ZpzpwIHT4CEmAlgz2A3doDmAGkY0m3AwYzAwUWNQb8BRysMZDRXTAIB%2FGl0GFqFzuBpgJLgX6IMBLewEg%2FMW%2FY6pBn5Hsxj76B0cD%2Fw%2BpeVb6fsvtPqaHvm5nolsWf0UvtrbKt84fLPjBtC7wJ4PzQNuATfDOmlPVU%2FiHeDi3h3789lsvDR86kofLg3vm0MSj7tiEdCD2lm8XGT1d8l1kxdJkfs82XbNPvnt1VWyyasqq31z72rYP9v2d%2Bub67eMXr9wH%2Bq9NZv3%2BbV%2BK80vZ0HFD7C2yTd3bh20ZHXhtkkFpcP2fPRzPTbJbBGDLLbQfLoDXXSH%2BnywN0%2B%2BOLD8UkE83zk0Sg01MYh3b169WQxWL4su%2F5RsDr1HMFOS6i%2BVxpTdDrlY3Z46eAXvg2P%2F6v5XvEGR5wnKjGNfaB3Lv4ouvsQ90Dvc3AA%2Bug4HwwOncFu8uA7r8xhalr7mr91DDjOD%2BMSpYjsu2nJzn3%2Bo3PJdd3CjDPdM5K94LtqWGDqfSdyD7w4FZFd51U%2FCnfPru2hvmaVYnQyGN0HJetNUTbe8JfOEyXki8ESzrp6hqrJ2E4oNsICh%2BCNPuAHzqSz83Xpf1uu2fHBVv6R4O4sZ%2BtWBO93A3niXXm%2Fu8s6PaQlpegXh%2BT8Nts%2Fbde%2BPSESWYo3%2BWFxeDoL%2BMu4vi7y7f%2FGR0s8as6xLX%2BbV%2BmPpPkEByrIM2n%2FH9ibszlG20iNRSyxQ3KbejdtQ67%2BaZr8MoX1weVfWuyWWbek3d0tGZs%2BsDPXtl7fDc%2FXshW%2BaypftMgxxVASDGjX%2F8eMuuco7l%2BT75lD7RfL94xbbddxiuDxFBbMxXek87dyfh7Jze1f7HsM%2BPf0DMb5zvQ%2FLh7zr8iMWx7yr8Ii5TVfztOyvDlV1s%2Bmcq9PFNnDi6W9yIehO1gwAAA%3D%3D"/>


