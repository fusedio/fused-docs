# Band algebra

# Buffer

```python
@fused.udf
def udf(
    total_bounds: list = "[-122.6953125, 37.43997405, -122.34375, 37.71859033]",
    chip_len: int = 512,
    band = "B02",
    time_of_interest= "2021-09-01/2021-12-30",
    collection= "sentinel-2-l2a"
):
    import json

    from shapely.geometry import box
    import geopandas as gpd
    import fused
    from utils import create_tiffs_catalog, run_pool_tiffs, search_pc_catalog
    
    bounds = json.loads(total_bounds)
    bbox = gpd.GeoDataFrame(geometry=[box(*bounds)], crs='4326')
    query = {"eo:cloud_cover": {"lt": 5}}

    stac_items = search_pc_catalog(bbox=bbox, time_of_interest=time_of_interest, query=query, collection=collection)
    df_tiff_catalog = create_tiffs_catalog(stac_items, [band])
    arrs_out = run_pool_tiffs(bbox, df_tiff_catalog, chip_len)

    return arrs_out[0][0], bbox

```


import Iframe from '@site/src/components/Iframe';


<Iframe url="https://staging.fused.io/workbench#app/s/aH4sIAAAAAAAAA51U32%2BbMBD%2BVyz2QNIlJPwOSHlo1%2B2xk9ZK01SqyMCRWjE2s82arMr%2FPoMR6sIeqgEC%2FH1n3%2Fm%2B871aBS%2FBSi1SN1wo1JxKKA4IS9SUh4wNqFQCcE2J6gipRrxqJZQ73DQjsgfeYFZqM%2F3sm3IkjlgIfMpYd0vlKKIozDLrRhsjTPeQC5xZ8479gL5BBQJYASl6VqqR6WrVUMxAYXEqeN20CoRTk0JwySvlaGhVYoUlqJUEpggDuvSW1MMZu7m%2Bu71HW%2FSaMaQvu%2BBYKkztFNk3a9deDHBOWzCYN2J7AcAM6I%2BggNJAwVsIyj04scZ6KpxSAxNNmM3GN1Q8UowIA22m1lHYU5vrkZIvRLhRj7ruX6jnGdSzM3Y2iX3oso54hdQzoF62UQr7HigUCn0n2pFCn4%2B4bijYvSKK65Ttct6yUupcdnPgqHaEaSVm9kPHIlLjPSBjYy9QZj0uXc9zoiT0XS9cID92Aj9J4mCtBz3lB35siNjdhMna95%2FGCvjaKMKZRBUXfazSBPfSB5cxPtBb1OvrHOAkZ8PUT7pUFfxrlhnqgjXTd9jsxcA5P%2BpyHJKAGTI2CKeZtRgGcj5dI3%2FHGvnFGl2Ut0Tqkj69CRPKwaQX5UUQBbPK%2FsHbkU%2FR62QLZ9QdoAmenzvlFD8A0wFmVrGpwgBwmJfrKEqCyA3LqijcuPDyCKq4jAsIceiDmydVWcVJkSdejoO1H66x5wVBZumkt2o3%2BulyN55%2BR7Rs1jtboFzHs%2B1VeZwE%2B6RpnaPt23qaO33lOL%2BwPoISXSHXWV%2F4yv%2FDV%2F5%2BX50cd1zUmJLfWgTCSjhm%2BkVVt8nZxbaX6CK2OVpNjD5eGM2vvDAcOl8fwqxf3tG96NTos9cSpjb2fG7ao7mthSXgZ0sE1LqnSSt9tMbmOnAgVfdrWqv%2BOWFB9cf0cOtpYRH5paX0vug6mZVWmEo4%2FwE5OAhW8gUAAA%3D%3D"/>