---
id: h3-example-ingest-gssurgo
title: Example — Ingest gSSURGO
sidebar_label: Example — Ingest gSSURGO
sidebar_position: 9
---

# Example: Ingest gSSURGO

[gSSURGO](https://www.nrcs.usda.gov/resources/data-and-reports/gridded-soil-survey-geographic-database-gssurgo) soil mukey rasters can be ingested to H3 with [`run_ingest_raster_to_h3`](/guide/h3-analytics/raster-to-h3).

## Ingest

See [Raster to H3 — Example: gSSURGO](/guide/h3-analytics/raster-to-h3#example-gssurgo-soil). Summary: single TIFF (e.g. `FY2023_gSSURGO-mukey.tif`) → `run_ingest_raster_to_h3` with overviews; no `metrics` for categorical mukey (default behavior).

## Read and use

Read by bounds and resolution with the H3 reader, then optionally join to the CONUS Component table for `taxsubgrp` (human-readable soil names):

```python
@fused.udf
def udf(
    bounds: fused.types.Bounds = [-121.525, 37.70, -120.96, 38.06],
    path: str = "s3://fused-asset/misc/hex/soil_gssurgo_hex/",
    res: int = 11,
):
    hex_reader = fused.load("https://github.com/fusedio/udfs/tree/8024b5c/community/joris/Read_H3_dataset/")
    df = hex_reader.read_h3_dataset(path, bounds, res=res)
    if "pct" not in df.columns:
        df["pct"] = df["cnt"] / df["cnt_total"]
    df = df.sort_values("pct", ascending=False).drop_duplicates("hex")
    return df
```

Columns include `hex`, `data` (mukey), `cnt`, `cnt_total`. Join `data` to [CONUS_Component.parquet](https://www.nrcs.usda.gov/) for `taxsubgrp` labels.
