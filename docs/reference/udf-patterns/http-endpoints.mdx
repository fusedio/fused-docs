---
title: HTTPS Endpoint Patterns
sidebar_label: HTTPS Endpoints
sidebar_position: 4
description: Patterns for exposing UDFs as HTTPS endpoints
---

# HTTPS Endpoint Patterns

Every saved UDF can be called via HTTPS, turning your data into an API.

---

## Endpoint URL Structure

```
https://www.fused.io/server/v1/realtime-shared/{token}/run/file?format=json
```

---

## Output Formats

### Tables
| Format | Use Case |
|--------|----------|
| `parquet` | Efficient binary |
| `geojson` | GIS tools |
| `json` | General API |
| `csv` | Spreadsheets |
| `mvt` | Map vector tiles |

### Images
| Format | Use Case |
|--------|----------|
| `png` | Raster tiles |
| `jpg` | Photos |
| `tiff` | GeoTIFF |

---

## Passing Parameters

Add query parameters to the URL:

```python
@fused.udf
def udf(lat: float = 0, lon: float = 0):
    return pd.DataFrame({'lat': [lat], 'lon': [lon]})
```

Call with:
```
https://www.fused.io/.../run/file?format=json&lat=37.77&lon=-122.41
```

---

## Tile Server Pattern

For map integration, use the tiles endpoint:

```
https://www.fused.io/server/v1/realtime-shared/{token}/run/tiles/{z}/{x}/{y}?format=png
```

Ensure your UDF:
- Accepts `bounds: fused.types.Bounds`
- Returns tile-appropriate data

---

## Multiple Return Types

```python
@fused.udf
def udf(output_type: str = "dataframe"):
    import pandas as pd
    
    data = pd.DataFrame({"x": [1, 2, 3]})
    
    if output_type == "json":
        return data.to_dict(orient="records")
    elif output_type == "html":
        return data.to_html()
    else:
        return data
```

---

## Authentication

### Shared Token (Public)
```
fsh_**********
```
Anyone with the token can call the endpoint.

### Bearer Token (Private)
```bash
curl -H "Authorization: Bearer $ACCESS_TOKEN" \
  "https://app.fused.io/server/v1/realtime/fused/api/v1/run/udf/saved/user@co.io/My_UDF"
```

---

## CORS Headers

UDF endpoints include CORS headers, enabling calls from web browsers.

---

## Example: Data API

```python
@fused.udf
def udf(
    city: str = "San Francisco",
    limit: int = 100
):
    import pandas as pd
    
    # Load and filter data
    df = pd.read_parquet("s3://bucket/cities.parquet")
    df = df[df['city'] == city].head(limit)
    
    return df
```

Endpoint:
```
.../run/file?format=json&city=Oakland&limit=50
```

---

## See Also

- [Integrations](/reference/udf-patterns/integrations)

