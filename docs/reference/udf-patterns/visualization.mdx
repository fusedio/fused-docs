---
title: Visualization Patterns
sidebar_label: Visualization
sidebar_position: 5
description: Patterns for UDF visualization and styling
---

# Visualization Patterns

Configure how UDF outputs appear on the map.

---

## UDF Type Metadata

Set the visualization type in metadata:

### Vector Types

```python
# Pan around map, load dynamically
udf.metadata = {'fused:udfType': 'vector_tile'}

# Load once, static
udf.metadata = {'fused:udfType': 'vector_single'}
```

### Raster Types

```python
# Pan around map, load tiles
udf.metadata = {'fused:udfType': 'raster_tile'}

# Load once, static image
udf.metadata = {'fused:udfType': 'raster_single'}
```

---

## Viz Config

Style layers with `fused:vizConfig`:

```python
udf.metadata = {
    'fused:udfType': 'vector_tile',
    'fused:vizConfig': {
        'vectorLayer': {
            'getFillColor': [255, 0, 0, 128],
            'getLineColor': [255, 255, 255],
            'lineWidthMinPixels': 1
        }
    }
}
```

---

## Color by Property

```python
'fused:vizConfig': {
    'vectorLayer': {
        'getFillColor': {
            'property': 'value',
            'colors': ['#ffffcc', '#a1dab4', '#41b6c4', '#225ea8']
        }
    }
}
```

---

## Return GeoDataFrame

```python
@fused.udf
def udf():
    import geopandas as gpd
    from shapely.geometry import Point
    
    return gpd.GeoDataFrame(
        {'name': ['A', 'B']},
        geometry=[Point(0, 0), Point(1, 1)],
        crs="EPSG:4326"
    )
```

---

## Return Image Array

```python
@fused.udf
def udf():
    import numpy as np
    
    # RGB array
    arr = np.random.randint(0, 255, (256, 256, 3), dtype=np.uint8)
    return arr
```

---

## Return Image with Bounds

```python
@fused.udf
def udf(bounds: fused.types.Bounds = None):
    import numpy as np
    
    arr = np.random.randint(0, 255, (256, 256, 3), dtype=np.uint8)
    return arr, bounds
```

---

## Colormap for Rasters

```python
@fused.udf
def udf(bounds: fused.types.Bounds = None):
    import numpy as np
    from matplotlib import cm
    
    # Single-band data
    data = np.random.rand(256, 256)
    
    # Apply colormap
    colored = (cm.viridis(data) * 255).astype(np.uint8)
    
    return colored, bounds
```

---

## HTML Output

```python
@fused.udf
def udf():
    import plotly.express as px
    
    fig = px.scatter(x=[1,2,3], y=[4,5,6])
    return fig.to_html()
```

---

## See Also

- [Viz Styling Reference](/reference/workbench/udf-builder/viz-styling)
- [Standalone Maps](/guide/building-apps/standalone-maps)

