---
id: engineering-etl
title: Engineering & ETL
sidebar_label: Engineering & ETL
sidebar_position: 2
---

# Engineering & ETL


### Connect Data to Fused

#### Connect your own data sources

You can directly connect your data buckets to Fused:
- [AWS S3](/workbench/file-explorer/#amazon-s3)
- [Google Cloud Storage](/workbench/file-explorer/#google-cloud-storage-gcs)
- [GCP BigQuery](/tutorials/Geospatial%20with%20Fused/gee_bigquery/#bigquery)
- [Google Earth Engine](/tutorials/Geospatial%20with%20Fused/gee_bigquery/#google-earth-engine)

#### Bring data directly inside Fused

Quickly bring any data not on the cloud into Fused:

1. Drag & Drop in [File Explorer](/workbench/file-explorer/)!

![Drag and drop files directly into Workbench](/img/tutorials/drag_and_drop.gif)

2. Use [`fused.upload()`](/python-sdk/api-reference/api/#upload)

[Install `fused`](/python-sdk/#python-install) Python, [authenticate](/python-sdk/authentication/#authenticate) & run:

```python
fused.api.upload("my_local_file.csv", "fd://my_data/file.csv")
```

Note: [`fd://`](/core-concepts/content-management/file-system/#fd-s3-bucket) is the [Fused provisioned private S3 path](/core-concepts/content-management/file-system/#fd-s3-bucket) for your team.


#### Optimize data loading

For files < 1GB:

Leverage [caching](/core-concepts/cache/#caching-basics) built in to Fused to make loading any data faster:

```python
@fused.udf
def udf(path: str = "s3://fused-sample/demo_data/housing_2024.csv"):
    import pandas as pd
    
    @fused.cache
    def load_data(path):
        return pd.read_csv(path)

    # Some processing 
    
    return load_data(path)
```

- As you make changes inside your UDF, `load_data()` will be [called from cache](/core-concepts/cache/#caching-any-python-function-fusedcache).
- This is especially useful for slow formats (CSV, Excel, etc.) or files that are not partitioned well.

For files > 1GB:

Use [`fused.ingest()`](/python-sdk/top-level-functions/#fusedingest) to ingest large datasets into cloud optimized, partitioned files.

```python
job = fused.ingest(
    input="https://www2.census.gov/geo/tiger/TIGER_RD18/LAYER/TRACT/tl_rd22_11_tract.zip",
    output=f"s3://fused-users/{user_id}/census/dc_tract/",
)

job.run_batch()
```

Read more about [how to ingest your data](/tutorials/Geospatial%20with%20Fused/geospatial-data-ingestion/ingest-your-data). 


### Turn your data into an API

<iframe 
    style={{
        width: "100%",
        maxWidth: "800px", 
        aspectRatio: "16/9",
        height: "auto"
    }}
    src="https://www.youtube.com/embed/4R6b52KliTw" 
    title="YouTube video player" 
    frameBorder="0" 
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
    referrerPolicy="strict-origin-when-cross-origin" 
    allowFullScreen>
</iframe>

1. In Workbench create a new UDF that returns data, for example:

```python
@fused.udf
def udf(path: str = "s3://fused-sample/demo_data/housing/housing_2024.csv"):
    import pandas as pd
    housing = pd.read_csv(path)
    housing['price_per_area'] = round(housing['price'] / housing['area'], 2)
    
    return housing[['price', 'price_per_area']]
```

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs className="unique-tabs">
  <TabItem value="udf-editor" label="UDF Editor" default>

    1. Click "Share" to open your UDF in a new Tab as a HTML Page
    2. Optionally: Edit the URL to return the data in your preferred file format.
    
    For example changing the `format` from `parquet` to `json`:

    ```bash
    # Returning as JSON
    https://fused.io/.../run/file?format=json

    # Returning as CSV
    https://fused.io/.../run/file?format=csv
    ```


  </TabItem>
  <TabItem value="advanced-udf-editor" label="Advanced UDF Editor">

    1. [Save your UDF](/workbench/udf-builder/code-editor/#save-a-udf) with `Cmd + S` (MacOS) / `Ctrl + S` (Win / Linux)
    2. Click the 3 dots and open "Settings"
    3. Click HTTPS URL to open the UDF in it's default file format

    Optionally: Edit the URL to return the data in your preferred file format.
    
    For example changing the `format` from `parquet` to `json`:

    ```bash
    # Returning as JSON
    https://fused.io/.../run/file?format=json

    # Returning as CSV
    https://fused.io/.../run/file?format=csv
    ```

  </TabItem>
</Tabs>

### Infrastructure (Github / Secrets / On Prem)

You can use Fused with your own infrastructure:
- Allow your team to save UDFs in [your own Github repo](/core-concepts/content-management/git/)
- Save & access [secrets](/workbench/preferences/#secrets-management) in Fused
- Use Fused on [your own servers](/core-concepts/onprem/) (On prem option)

### Examples

- [Ingesting ship transponder](/tutorials/Geospatial%20with%20Fused/use-cases/dark-vessel-detection/#3-ingesting-ais-data) data in fused
