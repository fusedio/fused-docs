---
title: HTTP Requests
sidebar_label: HTTP Requests
---

You can call a UDF via HTTP requests and pass geometries as query parameters or as XYZ tiles.

## Specify geometry

There's 2 ways to specify geometries. The first method involves specifying XYZ tiles as
path parameters and the second method entails passing a geometry query parameter.

### With an XYZ Tile

```python showLineNumbers
!curl -L -XGET "https://www.fused.io/server/v1/realtime-shared/55ffe996fc2bd635cde3beda7e2632005e228798a1ef333297240b86af7d12a4/run/tiles/16/11242/26162?dtype_out_vector=csv"
```

```json
{
  `,id,geometry,bbox,version,update_time,sources,names,class,level,has_parts,height,num_floors,facade_color,facade_material,roof_material,roof_shape,roof_direction,roof_orientation,roof_color,eave_height
29817,08b29a1d71665fff02003b190672d749,"POLYGON ((-118.2456419 34.0757878, -118.2457462 34.0758291, -118.2457887 34.0758459, -118.2458473 34.0757433, -118.2456721 34.075674, -118.2456399 34.0757304, -118.245613 34.0757198, -118.2455847 34.0757692, -118.24564 34.0757911, -118.2456419 34.0757878))","{'minx': -118.2458473, 'maxx': -118.2455847, 'miny': 34.075674, 'maxy': 34.0758459}",0,2016-06-17T23:09:45.000Z,"[{'property': '', 'dataset': 'OpenStreetMap', 'record_id': 'w425651576@1', 'confidence': None}]",None,residential,nan,False,6.8,nan,None,None,None,None,nan,None,None,nan
29818,08b29a1d71660fff0200a20ced7a1988,"POLYGON ((-118.2456437 34.0758676, -118.2457067 34.0758938, -118.2457437 34.0759091, -118.2457693 34.0758665, -118.2455866 34.0757906, -118.2455652 34.0757773, -118.2455059 34.0758433, -118.2455203 34.0758522, -118.2454841 34.0758925, -118.2455714 34.0759362, -118.2456437 34.0758676))","{'minx': -118.2457693, 'maxx': -118.2454841, 'miny': 34.0757773, 'maxy': 34.0759362}",0,2016-06-17T23:09:21.000Z,"[{'property': '', 'dataset': 'OpenStreetMap', 'record_id': 'w425651393@1', 'confidence': None}]",None,residential,nan,False,4.6,nan,None,None,None,None,nan,None,None,nan
...
}
```

## With parameters for latitude and longitude pairs

This sample URL passes a geometry's polygon pairs in the `lng_list` and `lat_list`
parameters. It also passes parameters for `census_variable`, `costing`, `duration`,
`count`, and `buffer`.

```python showLineNumbers
!curl -L -XGET "https://app-staging.fused.io/server/v1/realtime-shared/efff19cb8e3e12d0df1f307c0198384c746b961635d404eb1302cf15ad031485/run/file?dtype_out_vector=csv&census_variable=median household income&lng_list=-74.01, -74.010901, -74.000008, -73.98255, -73.9830327, -73.99468, -73.9905&lat_list=40.71021, 40.714353, 40.728349, 40.731949, 40.7150147, 40.7252, 40.730013&costing=auto&duration=20&count=TRUE&buffer=5"
```

## With a GeoJSON

When parameters are passed to a User Defined Function (UDF) via HTTP requests, they must
be encodeable. This is because HTTP is a text-based protocol, and any data transmitted
over it, including parameters, must be represented in a format that is compatible with
the protocol.

The best way to pass a geometry as a query parameter is to use an URL-encoded GeoJSON. You can URL encode a GeoJSON with `jq`.

```python showLineNumbers
# !apt-get install jq -q
```

```python showLineNumbers
!\
    export GEOJSON_ENCODED=$(printf '{"type": "FeatureCollection", "features": [{"id": "0", "type": "Feature", "properties": {"x": 11243, "y": 26163, "z": 16}, "geometry": {"type": "Polygon", "coordinates": [[[-118.23486328125, 34.075412438417395], [-118.23486328125, 34.070862323766306], [-118.2403564453125, 34.070862323766306], [-118.2403564453125, 34.075412438417395], [-118.23486328125, 34.075412438417395]]]}}]}' | jq --slurp --raw-input --raw-output @uri) && \
    echo $GEOJSON_ENCODED && \
    curl -L -XGET "https://www.fused.io/server/v1/realtime-shared/55ffe996fc2bd635cde3beda7e2632005e228798a1ef333297240b86af7d12a4/run/file?dtype_out_vector=geojson&bbox=${GEOJSON_ENCODED}"
```

```json
{
  `%7B%22type%22%3A%20%22FeatureCollection%22%2C%20%22features%22%3A%20%5B%7B%22id%22%3A%20%220%22%2C%20%22type%22%3A%20%22Feature%22%2C%20%22properties%22%3A%20%7B%22x%22%3A%2011243%2C%20%22y%22%3A%2026163%2C%20%22z%22%3A%2016%7D%2C%20%22geometry%22%3A%20%7B%22type%22%3A%20%22Polygon%22%2C%20%22coordinates%22%3A%20%5B%5B%5B-118.23486328125%2C%2034.075412438417395%5D%2C%20%5B-118.23486328125%2C%2034.070862323766306%5D%2C%20%5B-118.2403564453125%2C%2034.070862323766306%5D%2C%20%5B-118.2403564453125%2C%2034.075412438417395%5D%2C%20%5B-118.23486328125%2C%2034.075412438417395%5D%5D%5D%7D%7D%5D%7D
{"type": "FeatureCollection", "features": [{"id": "29809", "type": "Feature", "properties": {"id": "08b29a1d71736fff0200e88c887cc4df", "bbox": "{'minx': -118.2402435, 'maxx': -118.2400332, 'miny': 34.0708354, 'maxy': 34.0710418}", "version": "0", "update_time": "2016-06-17T23:09:38.000Z", "sources": "[{'property': '', 'dataset': 'OpenStreetMap', 'record_id': 'w425651519@1', 'confidence': None}]", "names": "None", "class": "None", "level": "nan", "has_parts": "False", "height": "6.4", "num_floors": "nan", "facade_color": "None", "facade_material": "None", "roof_material": "None", "roof_shape": "None", "roof_direction": "nan", "roof_orientation": "None", "roof_color": "None", "eave_height": "nan"}, "geometry": {"type": "Polygon", "coordinates": [[[-118.2400332, 34.0708631], [-118.2400759, 34.0710418], [-118.2402435, 34.0710141], [-118.2402007, 34.0708354], [-118.2400332, 34.0708631]]]}}, {"id": "29813", "type": "Feature", "properties": {"id": "08b29a1d71714fff0200549d60a90ed2", "bbox": "{'minx': -118.240026, 'maxx': -118.2398966, 'miny': 34.0720397, 'maxy': 34.0721962}", "version": "0", "update_time": "2024-03-02T08:00:00.000Z", "sources": "[{'property': '', 'dataset': 'Microsoft ML Buildings', 'record_id': '6180944817101276', 'confidence': None}\n {'property': 'properties/height', 'dataset': 'USGS Lidar', 'record_id': None, 'confidence': None}]", "names": "None", "class": "None", "level": "nan", "has_parts": "False", "height": "8.7", "num_floors": "nan", "facade_color": "None", "facade_material": "None", "roof_material": "None", "roof_shape": "None", "roof_direction": "nan", "roof_orientation": "None", "roof_color": "None", "eave_height": "nan"}, "geometry": {"type": "Polygon", "coordinates": [[[-118.239924, 34.0720397], [-118.2398966, 34.0721828], [-118.2399986, 34.0721962], [-118.240026, 34.0720531], [-118.239924, 34.0720397]]]}}, {"id": "29814", "type": "Feature", "properties": {"id": "08b29a1d71710fff0200e982e01ffc02", "bbox": "{'minx': -118.2401789, 'maxx': -118.2398461, 'miny': 34.0724969, 'maxy': 34.0725269}", "version": "0", "update_time": "2024-03-02T08:00:00.000Z", "sources": "[{'property': '', 'dataset': 'Microsoft ML Buildings', 'record_id': '6180940522133969', 'confidence': None}\n {'property': 'properties/height', 'dataset': 'USGS Lidar', 'record_id': None, 'confidence': None}]", "names": "None", "class": "None", "level": "nan", "has_parts": "False", "height": "9.8", "num_floors": "nan", "facade_color": "None", "facade_material": "None", "roof_material": "None", "roof_shape": "None", "roof_direction": "nan", "roof_orientation": "None", "roof_color": "None", "eave_height": "nan"}, "geometry": {"type": "Polygon", "coordinates": [[[-118.2398463, 34.0725269], [-118.2401789, 34.0725251], [-118.2401787, 34.0724985], [-118.2401133, 34.0724988], [-118.2401134, 34.0725233], [-118.2400544, 34.0725236], [-118.2400542, 34.0724969], [-118.2398461, 34.072498], [-118.2398463, 34.0725269]]]}}, {"id": "29815", "type": "Feature", "properties": {"id": "08b29a1d717adfff0200af8edea1ad58", "bbox": "{'minx': -118.2414251, 'maxx': -118.2385368, 'miny': 34.0724912, 'maxy': 34.0747588}", "version": "0", "update_time": "2018-04-24T09:36:40.000Z", "sources": "[{'property': '', 'dataset': 'OpenStreetMap', 'record_id': 'r7348164@2', 'confidence': None}\n {'property': 'properties/height', 'dataset': 'USGS Lidar', 'record_id': None, 'confidence': None}]", "names": "{'primary': 'Dodger Stadium', 'common': [('de', 'Dodger Stadion'), ('en', 'Dodger Stadium')], 'rules': None}", "class": "None", "level": "nan", "has_parts": "False", "height": "42.3", "num_floors": "nan", "facade_color": "None", "facade_material": "None", "roof_material": "None", "roof_shape": "None", "roof_direction": "nan", "roof_orientation": "None", "roof_color": "None", "eave_height": "nan"}, "geometry": {"type": "MultiPolygon", "coordinates": [[[[-118.2414251, 34.0735058], [-118.2414128, 34.0734305], [-118.2414096, 34.0734309], [-118.2414022, 34.0733861], [-118.2414163, 34.0733845], [-118.2414113, 34.0733539], [-118.2414047, 34.0733547], [-118.2413967, 34.0733063], [-118.2411468, 34.0733347], [-118.2411329, 34.0732799], [-118.24111, 34.0732079], [-118.2412014, 34.0731841], [-118.2411762, 34.0731255], [-118.2411341, 34.0730483], [-118.2410488, 34.0730834], [-118.2410198, 34.0730425], [-118.24101, 34.0730301], [-118.2411198, 34.0729696], [-118.2410843, 34.0729251], [-118.2410299, 34.0728665], [-118.2410116, 34.0728504], [-118.2410307, 34.0728354], [-118.2409929, 34.0728041], [-118.2409541, 34.0727737], [-118.2409142, 34.0727443], [-118.2408733, 34.0727158], [-118.2408151, 34.0726813], [-118.240754, 34.0726503], [-118.2407225, 34.0726362], [-118.2406578, 34.0726107], [-118.2405862, 34.0725863], [-118.2405268, 34.0725693], [-118.2404865, 34.0725598], [-118.240425, 34.0725484], [-118.2403629, 34.0725405], [-118.2403005, 34.0725363], [-118.2403033, 34.0724939], [-118.2402447, 34.0724912], [-118.2402416, 34.072538], [-118.240294, 34.0725404], [-118.2402861, 34.07266], [-118.2401275, 34.072658], [-118.2400443, 34.0726661], [-118.2400292, 34.0725882], [-118.2399428, 34.0726037], [-118.2398614, 34.0726234], [-118.2398877, 34.0726991], [-118.2398165, 34.0727226], [-118.2397516, 34.072749], [-118.2396588, 34.0726225], [-118.2395821, 34.0726615], [-118.2396812, 34.072785], [-118.2396756, 34.0727881], [-118.239705, 34.0728246], [-118.2396768, 34.0728403], [-118.2396986, 34.0728674], [-118.2396939, 34.07287], [-118.239671, 34.0728415], [-118.2395526, 34.0729074], [-118.239222, 34.0730876], [-118.2391104, 34.07315], [-118.2390885, 34.0731238], [-118.2391987, 34.07306], [-118.2392054, 34.0730679], [-118.2392494, 34.0730424], [-118.2391572, 34.072932], [-118.2390823, 34.0729753], [-118.2390529, 34.0729401], [-118.2389735, 34.0729861], [-118.2390249, 34.0730477], [-118.238972, 34.0730783], [-118.2390159, 34.0731308], [-118.2388879, 34.0732049], [-118.2388152, 34.0732554], [-118.2387696, 34.0732966], [-118.2387815, 34.0733057], [-118.238735, 34.073356], [-118.2386484, 34.0734637], [-118.2385846, 34.0735954], [-118.2385643, 34.0736556], [-118.2385465, 34.0737197], [-118.2385368, 34.0737892], [-118.2391516, 34.0738257], [-118.2391544, 34.0737974], [-118.2391606, 34.0737732], [-118.2391729, 34.0737385], [-118.2391924, 34.0737054], [-118.2392251, 34.0736651], [-118.2394925, 34.073597], [-118.239832, 34.0734107], [-118.2398172, 34.0733924], [-118.2400504, 34.0732727], [-118.2400741, 34.0732989], [-118.2401342, 34.0732734], [-118.2401695, 34.0732615], [-118.240214, 34.0732596], [-118.2402676, 34.0732657], [-118.2403161, 34.0732848], [-118.2403583, 34.0733096], [-118.2403948, 34.0733426], [-118.2404195, 34.073376], [-118.2404382, 34.073427], [-118.2404419, 34.0734798], [-118.240482, 34.0734791], [-118.2404921, 34.0736725], [-118.2404713, 34.0736756], [-118.2404975, 34.0740098], [-118.2405827, 34.0742331], [-118.240564, 34.0742776], [-118.2405246, 34.0743305], [-118.2404767, 34.0743756], [-118.2408703, 34.0747588], [-118.2409266, 34.074717], [-118.2410027, 34.0746444], [-118.2410638, 34.0745713], [-118.2411025, 34.0745138], [-118.2411352, 34.0744517], [-118.2411688, 34.074373], [-118.2411871, 34.0743072], [-118.2412088, 34.07431], [-118.2412201, 34.0742492], [-118.2412268, 34.0741802], [-118.2412215, 34.074107], [-118.2411506, 34.0741105], [-118.2411026, 34.0734391], [-118.2410619, 34.0734404], [-118.2410618, 34.0734376], [-118.2411009, 34.0734364], [-118.2411002, 34.0734085], [-118.2411425, 34.0734052], [-118.2411499, 34.0734503], [-118.241144, 34.073451], [-118.2411502, 34.0734885], [-118.2411404, 34.0734896], [-118.2411439, 34.0735115], [-118.2411419, 34.0735117], [-118.2411447, 34.073529], [-118.2412382, 34.0735184], [-118.2412395, 34.0735264], [-118.2413099, 34.0735184], [-118.241309, 34.0735129], [-118.2413416, 34.0735092], [-118.2413425, 34.0735151], [-118.2414251, 34.0735058]]], [[[-118.2404765, 34.0746077], [-118.2404129, 34.0744012], [-118.2403708, 34.0744084], [-118.2403688, 34.0744165], [-118.2401678, 34.0744403], [-118.2400049, 34.0744492], [-118.23986, 34.0744431], [-118.2397316, 34.0744297], [-118.2397253, 34.0744504], [-118.2397063, 34.0744489], [-118.239661, 34.0746341], [-118.2397783, 34.074648], [-118.239895, 34.0746567], [-118.2400144, 34.0746586], [-118.240127, 34.0746548], [-118.2402437, 34.0746453], [-118.2404765, 34.0746077]]], [[[-118.2395599, 34.0743392], [-118.2394733, 34.0742661], [-118.2393474, 34.0741352], [-118.2392885, 34.0740577], [-118.2391627, 34.0738767], [-118.2389235, 34.0739601], [-118.2389701, 34.0740469], [-118.2390259, 34.0741327], [-118.2390849, 34.0742181], [-118.2391528, 34.0742983], [-118.2392258, 34.074376], [-118.2393035, 34.0744499], [-118.2393862, 34.0745207], [-118.2395457, 34.0743769], [-118.2395303, 34.0743645], [-118.2395599, 34.0743392]]]]}}, {"id": "29816", "type": "Feature", "properties": {"id": "08b29a1d717aafff0200ec84dfba0373", "bbox": "{'minx': -118.2388277, 'maxx': -118.2386617, 'miny': 34.0738736, 'maxy': 34.0740265}", "version": "0", "update_time": "2024-03-02T08:00:00.000Z", "sources": "[{'property': '', 'dataset': 'Microsoft ML Buildings', 'record_id': '6181065076185513', 'confidence': None}\n {'property': 'properties/height', 'dataset': 'USGS Lidar', 'record_id': None, 'confidence': None}]", "names": "None", "class": "None", "level": "nan", "has_parts": "False", "height": "4.6", "num_floors": "nan", "facade_color": "None", "facade_material": "None", "roof_material": "None", "roof_shape": "None", "roof_direction": "nan", "roof_orientation": "None", "roof_color": "None", "eave_height": "nan"}, "geometry": {"type": "Polygon", "coordinates": [[[-118.2387646, 34.0738736], [-118.2386617, 34.0739128], [-118.2387248, 34.0740265], [-118.2388277, 34.0739873], [-118.2387646, 34.0738736]]]}}, {"id": "29831", "type": "Feature", "properties": {"id": "08b29a1d71633fff02009a707bb6b90a", "bbox": "{'minx': -118.2405817, 'maxx': -118.2402412, 'miny': 34.0748486, 'maxy': 34.0750544}", "version": "0", "update_time": "2016-06-17T23:09:25.000Z", "sources": "[{'property': '', 'dataset': 'OpenStreetMap', 'record_id': 'w425651417@1', 'confidence': None}]", "names": "None", "class": "residential", "level": "nan", "has_parts": "False", "height": "5.9", "num_floors": "nan", "facade_color": "None", "facade_material": "None", "roof_material": "None", "roof_shape": "None", "roof_direction": "nan", "roof_orientation": "None", "roof_color": "None", "eave_height": "nan"}, "geometry": {"type": "Polygon", "coordinates": [[[-118.2405817, 34.0749902], [-118.2405429, 34.0748486], [-118.2404091, 34.074874], [-118.2404039, 34.074855], [-118.2402412, 34.0748858], [-118.2402617, 34.0749605], [-118.2402866, 34.0749557], [-118.240288, 34.0749606], [-118.2402928, 34.0749597], [-118.2403152, 34.0750416], [-118.2403643, 34.0750323], [-118.2403703, 34.0750544], [-118.2405318, 34.0750238], [-118.2405255, 34.0750008], [-118.2405817, 34.0749902]]]}}, {"id": "29845", "type": "Feature", "properties": {"id": "08b29a1d7178dfff020096f8f8f86c4e", "bbox": "{'minx': -118.2395525, 'maxx': -118.239416, 'miny': 34.0745845, 'maxy': 34.0746711}", "version": "0", "update_time": "2024-03-02T08:00:00.000Z", "sources": "[{'property': '', 'dataset': 'Microsoft ML Buildings', 'record_id': '6180992061741462', 'confidence': None}\n {'property': 'properties/height', 'dataset': 'USGS Lidar', 'record_id': None, 'confidence': None}]", "names": "None", "class": "None", "level": "nan", "has_parts": "False", "height": "2.1", "num_floors": "nan", "facade_color": "None", "facade_material": "None", "roof_material": "None", "roof_shape": "None", "roof_direction": "nan", "roof_orientation": "None", "roof_color": "None", "eave_height": "nan"}, "geometry": {"type": "Polygon", "coordinates": [[[-118.239416, 34.0746316], [-118.2395284, 34.0746711], [-118.2395525, 34.0746241], [-118.2394401, 34.0745845], [-118.239416, 34.0746316]]]}}, {"id": "29846", "type": "Feature", "properties": {"id": "08b29a1d71781fff0200213f7df2b312", "bbox": "{'minx': -118.2387863, 'maxx': -118.2384835, 'miny': 34.0740557, 'maxy': 34.0743459}", "version": "0", "update_time": "2016-06-17T23:09:43.000Z", "sources": "[{'property': '', 'dataset': 'OpenStreetMap', 'record_id': 'w425651564@1', 'confidence': None}]", "names": "None", "class": "None", "level": "nan", "has_parts": "False", "height": "3.7", "num_floors": "nan", "facade_color": "None", "facade_material": "None", "roof_material": "None", "roof_shape": "None", "roof_direction": "nan", "roof_orientation": "None", "roof_color": "None", "eave_height": "nan"}, "geometry": {"type": "Polygon", "coordinates": [[[-118.2385688, 34.0743459], [-118.2387863, 34.0742731], [-118.2387239, 34.0741439], [-118.2386916, 34.0741547], [-118.2386438, 34.0740557], [-118.2384835, 34.0741092], [-118.2385222, 34.0741892], [-118.2384971, 34.0741975], [-118.2385688, 34.0743459]]]}}, {"id": "29849", "type": "Feature", "properties": {"id": "08b29a1d73b61fff020018fadbba4e70", "bbox": "{'minx': -118.2358062, 'maxx': -118.2349741, 'miny': 34.0744446, 'maxy': 34.0753929}", "version": "0", "update_time": "2021-03-26T15:55:58.000Z", "sources": "[{'property': '', 'dataset': 'OpenStreetMap', 'record_id': 'w425651452@2', 'confidence': None}]", "names": "None", "class": "None", "level": "nan", "has_parts": "False", "height": "1.7", "num_floors": "nan", "facade_color": "None", "facade_material": "None", "roof_material": "None", "roof_shape": "None", "roof_direction": "nan", "roof_orientation": "None", "roof_color": "None", "eave_height": "nan"}, "geometry": {"type": "Polygon", "coordinates": [[[-118.2354692, 34.0744706], [-118.2354184, 34.0744986], [-118.2349742, 34.0751988], [-118.2349741, 34.0752106], [-118.2349761, 34.0752306], [-118.2349821, 34.0752452], [-118.2349945, 34.0752592], [-118.2350043, 34.0752661], [-118.2350428, 34.0752848], [-118.2352866, 34.0753907], [-118.2353132, 34.0753929], [-118.2353339, 34.0753862], [-118.2353614, 34.0753738], [-118.2358048, 34.0746773], [-118.2358062, 34.0746491], [-118.2358059, 34.0746158], [-118.2358001, 34.0745854], [-118.235772, 34.0745274], [-118.2357349, 34.0744916], [-118.2356916, 34.0744671], [-118.2356368, 34.0744487], [-118.2355784, 34.0744446], [-118.2355105, 34.0744572], [-118.2354692, 34.0744706]]]}}]}`
}
```
