---
id: app-builder
title: App Builder
tags: [app]
sidebar_position: 0
---


import Tag from '@site/src/components/Tag'

## <Tag color="#D1E550" fontColor="#141414" >ðŸš§ Under Construction</Tag>


The App Builder transforms UDFs into interactive, shareable apps.

Data scientists often need to make analytics interactive and accessible for broader audiences. Traditionally this meant custom React apps with maps and widgets - but it's inefficient to invest time in a UI for a prototype that might be discarded. Conversely, frontend frameworks are not well suited for data analytics or handling large datasets. The App Builder addresses this by enabling users to build functional apps powered by UDFs.

With this in mind, the App Builder enables users to build and run Streamlit apps in the browser with Python. Fused leverages and compliments [stlite](https://github.com/whitphx/stlite): UDFs run libraries not available on Pyodide, manage secrets securely, and run workflows that wouldn't typically run within browser memory.



- [Get started](/workbench/app-builder/#get-started)
- [Build apps](/workbench/app-builder/#build-apps), install [dependencies](/workbench/app-builder/#dependencies), and [debug](/workbench/app-builder/#debug)
- [Call Fused UDFs](/workbench/app-builder/#call-fused-udfs)
- Share with [URLs](/workbench/app-builder/#share) or [GitHub gists](/workbench/app-builder/#github-gists)




## Get started

Write code on the online editor and create a shareable URL in one click.

import Iframe from "@site/src/components/Iframe";
import CODE from "@site/src/app-iframe/python/nsi.py";

<Iframe
  id="iframe-1"
  code={CODE}
  requirements={[
    "/pyarrow/pyarrow-17.0.0-cp312-cp312-pyodide_2024_0_wasm32.whl",
    "micropip",
    "pyodide-unix-timezones", // needed by pyarrow
    "geopandas",
    "requests",
    "xarray",
    "yarl",
    // Commonly used in product:
    "pydeck",
  ]}
/>


## Build apps



Add [widgets](https://docs.streamlit.io/develop/api-reference/widgets) that interact with UDFs, display data with [data](https://docs.streamlit.io/develop/api-reference/data) and [text](https://docs.streamlit.io/develop/api-reference/text) elements, and structure the app with [layout components](https://docs.streamlit.io/develop/api-reference/layout). If you're new to Streamlit, check out the [Streamlit Get Started](https://docs.streamlit.io/get-started) page.

```python
import streamlit as st

st.write("Hello, *Fused!* :rocket:")
```

By default, your app updates every time you change its code. This can be configured in the settings.




## Dependencies

Click "Requirements" on the top-right menu of the code editor to set Python packages for the app. This is limited to packages compatible with Pyodide. Please get in touch if you need help with a specific package.


It can be useful to build apps without pre-installed dependencies. Use [micropip](https://pypi.org/project/micropip/) to install packages at runtime. When using this approach, `requests` should be installed before `fused_app` is imported.

```python
import micropip
await micropip.install("requests")
await micropip.install("pydeck")
import fused_app
import pydeck as pdk
```

This is also useful for [Gists](/workbench/app-builder/#github-gists), which cannot specify dependencies ahead of time.


## Debug

Click "Reset app" on the top-right menu of the code editor in case things aren't working as expected.


## Call Fused UDFs

Apps can call UDFs and load their output into memory. This enables apps to

Fused UDFs can run code that utilizes libraries not supported by Pyodide, enabling more complex and resource-intensive operations.




that run code that use libraries that [pyodide](https://pyodide.org/en/stable/),  doesn't support.
- **Secure:** Stlite uses UDFs for secret management.
- **Fast:** Stlite loads and caches data from UDFs that run operations that might otherwise overwhelm the browser.

These snippets illustrate a few ways to call UDFs.

### With `fused_app.run` (beta)

Call a UDF with `fused_app.run` and pass parameters from widgets.

```python
import fused_app
import streamlit as st

threshold = st.sidebar.slider("Threshold", 0, 1000, 250)
token = "dbd709c58f1d828bb06f3fc53991963910dc585ab45b692b5981bd78a78fa43a"
df = fused_app.run(token, threshold=threshold)

```



### HTTP endpoints

Call Fused UDFs with HTTP endpoints and pass parameters from widgets.

```python
import streamlit as st
import requests

city = st.selectbox("Select city", ("Boston", "Paris", "New York"))
url = f"https://staging.fused.io/server/v1/realtime-shared/fsh_1bkKoOETvhhQ7TtKfwOQ7i/run/file?dtype_out_vector=geojson&city={city}"

response = requests.get(url)
st.write(response.content)
```

### Pandas

Create a [pandas](https://pandas.pydata.org/docs/user_guide/index.html) `DataFrame` from a UDF HTTP endpoint.

```python
import streamlit as st
import pandas as pd

url = f"https://staging.fused.io/server/v1/realtime-shared/fsh_1bkKoOETvhhQ7TtKfwOQ7i/run/file?dtype_out_vector=csv&city=Boston"
df = pd.read_csv(url)
st.data_editor(df.head())
```

### Pydeck

Create [pydeck](https://deckgl.readthedocs.io/en/latest/layer.html) layers with UDF HTTP endpoints.

```python
import pydeck as pdk
import streamlit as st

url_overture = "https://www.fused.io/server/v1/realtime-shared/c8679490a7c130178e2781a45f4090208c9bcd8d8d7572532c4c39c4d0914467/run/tiles/{z}/{x}/{y}?dtype_out_vector=geojson&return_object=gdf_overture"
st.pydeck_chart(
    pdk.Deck(
        map_style="mapbox://styles/mapbox/dark-v9",
        initial_view_state=pdk.ViewState(latitude=40.7431, longitude=-73.9874, zoom=14, pitch=25),
        layers=[
            pdk.Layer(
                "TileLayer",
                data=url_overture,
                get_line_color=[255, 25, 2, 100],
                stroked=True,
                get_line_width=2,
                pickable=True,
                filled=False,
            )
        ],
    )
)
```

## Caching

It can be helpful to cache the response of UDF calls. To cache a function in Streamlit, decorate it with [`@st.cache_data`](https://docs.streamlit.io/develop/concepts/architecture/caching).

```python
import fused_app
import streamlit as st

@st.cache_data
def call_udf(token):
    return fused_app.run(token)

df = call_udf(fsh_1bkKoOETvhhQ7TtKfwOQ7i)
```


## Share

Generate a URL to share or `<iframe>` an app.

Shared apps run without authentication. Public URLs have a token like `https://www.fused.io/workbench#app/s/i/fa_45G5QVNVUPJPo4jr6k4mtY`.

In private URLs, code is encoded in the URL like `https://www.fused.io/workbench#app/s/aH4sIAAAAAAAAA...`.

## GitHub gists

Load an app from a Github Gist directly from the UI or by appending the gist ID to the URL like:

```
https://www.fused.io/workbench#app/s/u/https://gist.github.com/pgzmnk/43045302f3b668ab5482d8a23f6f4de5
```


## App gallery

## <Tag color="#D1E550" fontColor="#141414" >ðŸš§ Coming soon...</Tag>
