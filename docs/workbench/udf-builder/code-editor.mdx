---
id: code-editor
title: Code Editor
tags: [code, editor, workbench]
sidebar_position: 0
---

The Code Editor is where developers write UDFs using standard Python libraries and installed [dependencies](/guide/advanced-setup/dependencies). The [Editor](/workbench/udf-builder/code-editor/#editor) tab contain functionality to organize code, create [HTTPS endpoints](/guide/data-input-outputs/export-api/tokens-endpoints), and configure the UDF.

![Code Editor](/img/workbench/udf-builder/code_editor.png)

## Editor

The editor contains the UDF's [function declaration](/guide/working-with-udfs/writing-udfs/#function-declaration). Whenever code is updated, Fused automatically runs the function named `udf` that is decorated with [`@fused.udf`](/guide/working-with-udfs/writing-udfs/#fusedudf-decorator) and returns the output. Other UDFs declared in the editor are ignored unless referenced by the main `udf` function.

## Default Parameters hierarchy

Just like any other Python function, UDFs can have default parameters. In Workbench, these can be set in Python directly.

The hierarchy is as follows:
1. In-Python parameter (when defining the function)
2. [HTTPS Request](/guide/data-input-outputs/export-api/tokens-endpoints) / Calling UDF with [shared token](/guide/data-input-outputs/export-api/tokens-endpoints#shared-token)

![Default parameters hierarchy](/img/workbench/udf-builder/code_editor/overview_default_params.png)

<details>
<summary>Example: Hierarchy of default parameters</summary>

Let's start with a simple UDF:
```python
@fused.udf
def udf(my_default_param: float = 1.5):
    
    print(f"{my_default_param=}")
    return my_default_param
```

In Workbench, without defining else we would get `1.5` back:

![Default parameters hierarchy](/img/workbench/udf-builder/code_editor/overview_default_params.png)

Now we can set default parameters in the UDF layer UI:

<ReactPlayer playsinline={true} className="video__player" playing={false} muted={true} controls height="100%" url="https://fused-magic.s3.us-west-2.amazonaws.com/workbench/walkthrough-videos/docs_rewrite/code_editor_setting_default_params_in_UI_compressed3.mp4" width="100%" />

In this case Workbench overwrites the default parameter in the Python code with the value set in the UI:

![Workbench UI overwrites Python default params](/img/workbench/udf-builder/code_editor/workbench_overrides_default_value.png)

And finally, if you call this UDF through HTTPS / Shares token, then the default parameter will of course be overwritten by the value you provide:

![Overwriting in python](/img/workbench/udf-builder/code_editor/overwriting_in_python.png)

</details>

## Debug

The code editor highlights errors in the code and shows error logs to help debug.

<ReactPlayer playsinline={true} className="video__player" playing={false} muted={true} controls height="100%" url="https://fused-magic.s3.us-west-2.amazonaws.com/workbench/walkthrough-videos/docs_rewrite/debug_code_editor_edit6.mp4" width="100%" />

## Profiler

UDF Builder comes with a built-in profiler that can be used to analyze the performance of a UDF.

This gives you the line-by-line execution time in the UDF.

Note:
- Values are only available for the current run of the UDF.
- Running the same UDF twice might lead to different runtimes especially if you call [cached functions](/guide/working-with-udfs/udf-best-practices/caching#fusedcache) or [cached UDFs](/guide/working-with-udfs/udf-best-practices/caching#udf-cache).
- When a line is called multiple times the profiler shows the sum time of all calls & number of hits:

![multiple hits profiler](/img/workbench/udf-builder/code_editor/profiler_multiple_hits.gif)


## Save a UDF

UDFs show an asterisk (`*`) next to their name when changes have been made since the last save. 

You can Save a UDF in 2 ways:
- Click on 3 dots -> "Save"
- `Cmd + S` (MacOS) / `Ctrl + S` (Win / Linux)

Clicking the "Save" icon saves the present state of the UDF under your account's UDFs.

If the "Save" icon appears greyed out, it means you're viewing a read-only version of the UDF. Make a copy to create a new version than can be modified and saved.

![Save Icon](/img/save_icon.png)

## Auto, Tile, and Single (Viewport, Parameter)

On UDF Builder, UDFs can explicitly be set to run as [Tile or File](/guide/working-with-udfs/udf-best-practices/geospatial-single-vs-tile) - or autoselect between the two if the `bounds` object is [typed](/guide/working-with-udfs/udf-best-practices/geospatial-single-vs-tile#bounds).

![File](/img/workbench/udf-builder/file_tile.png)

## Utils Module [Legacy]

:::warning Utils module is deprecated
It is only available as a legacy feature (available to turn on in the [Workbench Preferences](/workbench/preferences/)).
:::

A Fused UDF can import Python objects from its accompanying [utils Module](/guide/working-with-udfs/writing-udfs), defined in the Utils Tab's code editor. You can import functions from it in your UDF with `from utils import my_function`.

Here is an example in an old version ofthe Public [Overture_Maps_example](https://github.com/fusedio/udfs/tree/d9f419dadf6267efc79f0ea2092a4dda0e22cb97/public/Overture_Maps_Example) UDF:

```python showLineNumbers
# This is an old version of the code for demonstration purposes
@fused.udf
def udf(
    bounds: fused.types.Bounds,
    release: str = "2025-01-22-0",
):
    from utils import get_overture

    gdf = get_overture(
        bounds=bounds,
        release=release,
    )
    return gdf
```
![UDF Builder Utils](/img/workbench/udf-builder/utils.png)