---
id: advanced-fused
title: Fonctionnalités avancées de Fused
sidebar_label: Fonctionnalités avancées de Fused
sidebar_position: 3
---

# Fonctionnalités avancées de Fused

Installez le package Python `fused` localement :

```bash
pip install "fused[all]"
```

Lisez-en plus sur [l'installation de Fused](/python-sdk/#python-install).

Exécutez les extraits de code suivants dans un [notebook](https://jupyter.org/install) pour une meilleure interactivité !

### Exécutez des centaines de tâches en quelques secondes : `fused.submit()`

Calculez les prix moyens des maisons au fil des ans :

```python
# Cet exemple provient d'un notebook, pas de workbench
import fused 

@fused.udf
def udf(path: str = "s3://fused-sample/demo_data/housing/housing_2024.csv"):
    import pandas as pd
    housing = pd.read_csv(path)
    housing['price_per_area'] = housing['price'] / housing['area'].round(2)

    return housing['price_per_area'].mean()

# Listez tous les fichiers disponibles
housing_lists = fused.api.list('s3://fused-sample/demo_data/housing/')

results = fused.submit(
    udf, 
    housing_lists[10:] # Exécution uniquement des 10 premiers fichiers à des fins de démonstration
)
```

Imprimez les résultats :

```python
results

>>> 
path	
s3://fused-sample/demo_data/housing/housing_1970.csv	1376.804413
s3://fused-sample/demo_data/housing/housing_1971.csv	1492.044819
s3://fused-sample/demo_data/housing/housing_1972.csv	1484.496548
```

Lisez-en plus sur l'exécution de votre code en parallèle [ici](/core-concepts/run-udfs/run-small-udfs/#running-jobs-in-parallel-fusedsubmit)


### Tâches par lots

Exécutez des tâches plus importantes qui dépassent les [contraintes de mémoire et de temps](/core-concepts/run-udfs/run-small-udfs/#defining-small-job) d'une seule tâche UDF.

```python
# Cet exemple provient d'un notebook, pas de workbench
@fused.udf
def udf(val):
    import time
    import pandas as pd

    # Simulation d'une étape de traitement complexe
    time.sleep(200) 

    return pd.DataFrame({'val':[val]})
    
# Exécution avec 5 entrées
job = udf(arg_list=[0,1,2,3,4])
job.run_batch()
```

Lisez-en plus sur la configuration des tâches par lots [ici](/core-concepts/run-udfs/run_large/)

### Prévisualisez de grands fichiers depuis votre ordinateur portable

Utilisez Fused pour échantillonner de grands ensembles de données pour une exploration locale. Les données se chargent à l'intérieur de votre UDF et ne vous envoient que l'échantillon.

En utilisant l'ensemble de données météorologiques ERA5 comme exemple (~140 Mo) :
```python
@fused.udf
def udf(path: str='s3://fused-asset/data/era5/t2m/datestr=2024-01-01/0.parquet'):
    import pandas as pd
    df = pd.read_parquet(path)

    return df.head(10)
```

Obtenez un petit échantillon de données :

```python
sample = fused.run(udf)
```