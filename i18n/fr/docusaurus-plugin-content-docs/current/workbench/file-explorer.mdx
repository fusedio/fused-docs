---
id: file-explorer
title: Explorateur de fichiers
tags: [file, s3, explorer]
sidebar_position: 3
---

L'Explorateur de fichiers fournit une interface simplifiée pour parcourir, prévisualiser et ouvrir des fichiers dans le stockage d'objets cloud et le [disque monté](/core-concepts/content-management/file-system/#mntcache-disk). Fused prend en charge Amazon S3 et Google Cloud Storage, avec d'autres intégrations à venir bientôt.

<iframe 
    style={{
        width: "100%",
        maxWidth: "800px", 
        aspectRatio: "16/9",
        height: "auto",
        margin: "0 auto",
        display: "block"
    }}
    src="https://www.youtube.com/embed/c8-LjKG8xLc" 
    title="Lecteur vidéo YouTube" 
    frameBorder="0" 
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
    referrerPolicy="strict-origin-when-cross-origin" 
    allowFullScreen>
</iframe>

Lors de la manipulation de données, il peut être long de retrouver des ensembles de données, de demander un accès, de télécharger des gigaoctets de données et d'écrire du code standard pour lire des fichiers. L'Explorateur de fichiers simplifie ce processus en permettant aux utilisateurs de parcourir facilement n'importe quel bucket de stockage d'objets, de visualiser le contenu des fichiers sans écrire de code, et de créer rapidement des [User Defined Functions (UDFs)](/core-concepts/why/) dans le [UDF Builder](/workbench/udf-builder/) avec des [templates](/workbench/file-explorer/#template-udfs) pour des types de fichiers spécifiques.

- [Parcourir](/workbench/file-explorer/#browse) les buckets de stockage d'objets et lister leurs fichiers
- [Prévisualiser](/workbench/file-explorer/#preview) rapidement des fichiers
- [Créer](/workbench/file-explorer/#create-udf) un nouvel UDF à partir d'un [template](/workbench/file-explorer/#template-udfs) pour ouvrir le fichier
- [Connecter](/workbench/file-explorer/#connect-your-own-bucket) un bucket S3 ou GCS

<video 
    style={{
        width: "100%",
        maxWidth: "800px", 
        aspectRatio: "16/9",
        height: "auto",
        margin: "0 auto",
        display: "block"
    }}
    controls 
    muted>
    <source src="https://fused-magic.s3.us-west-2.amazonaws.com/workbench-walkthrough-videos/docs_rewrite/file_explorer_intro5.mp4" type="video/mp4" />
    Votre navigateur ne prend pas en charge la balise vidéo.
</video>

## Parcourir

Parcourez les répertoires et les fichiers dans les buckets. Utilisez la barre de recherche et les options de filtrage pour localiser rapidement des fichiers spécifiques, et "Favoriser" des fichiers pour un accès rapide. Pour explorer un bucket, trouvez-le dans le menu déroulant "Favoris" ou collez son chemin. Pour connecter des buckets privés, contactez Fused.

![Recherche Explorateur de fichiers](/img/workbench/file-explorer/file_explorer_search.png)

## Prévisualiser

L'Explorateur affiche les répertoires et objets d'un bucket sous forme de dossiers. Chaque fichier répertorié montre des métadonnées telles que la taille du fichier et le chemin, ainsi que des utilitaires pour télécharger ou supprimer le fichier, copier son chemin, générer une [URL signée](https://docs.aws.amazon.com/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html), et [créer un UDF](/workbench/file-explorer/#create-udf) pour l'ouvrir.

Cliquez sur un fichier pour prévisualiser son contenu. Si le fichier a un composant spatial, il sera affiché sur la [carte](/workbench/udf-builder/map), vous permettant de zoomer et de vous déplacer pour explorer les données rendues. Pour les images ou d'autres types de fichiers, Fused fera de son mieux pour rendre et afficher le contenu.

![Prévisualisation Explorateur de fichiers](/img/workbench/file-explorer/file_explorer_preview.png)

## Créer UDF

Créez des UDF Fused en utilisant des templates pour des types de fichiers courants. Double-cliquez sur un fichier pour créer un nouvel UDF template qui lit le fichier, ou trouvez des lecteurs supplémentaires dans le menu kebab du fichier. Les [tables Parquet](https://www.upsolver.com/blog/apache-parquet-why-use) affichent un bouton "Ouvrir la table" pour les ouvrir au niveau du répertoire.

![Créer UDF Explorateur de fichiers](/img/workbench/file-explorer/file_explorer_createudf.png)

## Templates UDF

Des templates UDF sont disponibles pour des types de fichiers courants (comme `CSV`, `Parquet`) et des outils (comme `DuckDB` et `GeoPandas`). Consultez les derniers templates UDF dans le [repo UDFs](https://github.com/fusedio/udfs/tree/main/files).

Les types de fichiers pris en charge pour les tables vectorielles incluent `parquet`, `JSON`, `CSV`, `excel`, `zip`, et `KML`. Pour les fichiers raster, `GeoTIFF` et `NetCDF` sont pris en charge. Si vous avez besoin d'un type de fichier qui n'est pas pris en charge, demandez-le sur le [canal Discord](https://discord.com/invite/BxS5wMzdRk) de Fused ou [contribuez](/workbench/udf-catalog/#contribute-to-fused) un template à la communauté.

## Télécharger / Télécharger / Éditer 

L'Explorateur de fichiers vous permet également de :
- Télécharger des fichiers (glisser-déposer)
- Télécharger des fichiers
- Créer de nouveaux répertoires

:::note Les répertoires ne peuvent pas être vides
Dans l'Explorateur de fichiers, les répertoires ne seront pas enregistrés s'ils n'ont pas de contenu.
:::

## Connecter votre propre bucket

<Tag color="#3399ff">Entreprise</Tag> _Cette fonctionnalité est accessible aux organisations ayant un abonnement Fused Enterprise._

Connectez des buckets S3 ou GCS pour accéder à leurs fichiers de manière interactive depuis l'interface de l'Explorateur de fichiers et de manière programmatique depuis les UDF.

Contactez Fused pour configurer un bucket S3 ou GCS sur l'Explorateur de fichiers pour tous les utilisateurs de votre organisation. Alternativement, définissez un bucket comme "favori" afin qu'il apparaisse dans l'Explorateur de fichiers uniquement pour votre compte.

Pour les buckets qui ne sont pas accessibles publiquement, suivez ces étapes pour configurer les autorisations nécessaires.

### Amazon S3

import Tag from '@site/src/components/Tag'

Définissez la politique ci-dessous sur votre bucket, en remplaçant `YOUR_BUCKET_NAME` par son nom. Fused fournira `YOUR_ENV_NAME`.

import Details from '@theme/MDXComponents/Details';

<Details open={false}>


```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "Allow object access by Fused fused account",
            "Effect": "Allow",
            "Principal": {
                "AWS": [
                    "arn:aws:iam::926411091187:role/rt-production-YOUR_ENV_NAME",
                    "arn:aws:iam::926411091187:role/ec2_job_task_role-v2-production-YOUR_ENV_NAME",
                ]
            },
            "Action": [
                "s3:ListBucket",
                "s3:GetObjectAttributes",
                "s3:GetObject",
                "s3:PutObject",
                "s3:DeleteObject"
            ],
            "Resource": [
                "arn:aws:s3:::YOUR_BUCKET_NAME/*",
                "arn:aws:s3:::YOUR_BUCKET_NAME"
            ]
        }
    ]
}
```

</Details>

Alternativement, utilisez cette [application Fused](https://www.fused.io/workbench#app/s/i/fa_2yQFVcbSYR1vW4Aa8zL1HC) pour structurer automatiquement la politique pour vous.

Le bucket doit activer les paramètres CORS suivants pour permettre le téléchargement de fichiers depuis Fused.

<Details open={false}>

```json
[
    {
        "AllowedHeaders": [
            "range",
            "content-type",
            "content-length"
        ],
        "AllowedMethods": [
            "GET",
            "HEAD",
            "PUT",
            "POST"
        ],
        "AllowedOrigins": [
            "*"
        ],
        "ExposeHeaders": [
            "content-range"
        ],
        "MaxAgeSeconds": 0
    }
]
```
</Details>

### Google Cloud Storage (GCS)

Pour connecter un bucket Google Cloud Storage à votre environnement Fused, vous devrez suivre ces étapes :

1. Créer un compte de service dans GCS
Configurez un compte de service Google Cloud avec des autorisations pour lire, écrire et lister depuis le bucket GCS. Consultez la documentation de Google Cloud pour des instructions sur :
- [Créer un compte de service](https://cloud.google.com/iam/docs/service-accounts-create)
- [Définir les autorisations pour le compte de service](https://cloud.google.com/iam/docs/manage-access-service-accounts)

2. Télécharger le fichier de clé JSON
Téléchargez le fichier de clé JSON associé au compte de service. Ce fichier contient des informations d'identification que Fused utilisera pour accéder au bucket GCS.

3. Définir la clé JSON comme secret
Définissez la clé JSON comme un secret dans l'[interface de gestion des secrets](/workbench/preferences/#secrets-management). Le secret doit être nommé `gcs_fused`.

Vous devez ensuite écrire ces informations d'identification dans un fichier JSON et les transmettre à Google comme :

```python
@fused.udf
def udf():
    from google.cloud import storage

    # obtenir les secrets GCP
    with open("/tmp/gcs_key.json", "w") as f:
        f.write(fused.secrets["gcs_fused"])
    os.environ["GOOGLE_APPLICATION_CREDENTIALS"] = "/tmp/gcs_key.json"

    # votre code ici
```