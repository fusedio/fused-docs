---
id: code-editor
title: Éditeur de Code
tags: [code, éditeur, workbench]
sidebar_position: 0
---

L'Éditeur de Code est l'endroit où les développeurs écrivent des UDF en utilisant des bibliothèques Python standard et des [dépendances](/core-concepts/run-udfs/dependencies/) installées. L'onglet [Éditeur](/workbench/udf-builder/code-editor/#editor) contient des fonctionnalités pour organiser le code, créer des [points de terminaison HTTPS](/core-concepts/run-udfs/run-small-udfs/#https-requests) et configurer l'UDF.

![Éditeur de Code](/img/workbench/udf-builder/code_editor.png)

## Éditeur

L'éditeur contient la [déclaration de fonction](/core-concepts/write/#function-declaration) de l'UDF. Chaque fois que le code est mis à jour, Fused exécute automatiquement la fonction nommée `udf` qui est décorée avec [`@fused.udf`](/core-concepts/write/#fusedudf-decorator) et renvoie la sortie. Les autres UDF déclarés dans l'éditeur sont ignorés à moins d'être référencés par la fonction principale `udf`.

## Hiérarchie des paramètres par défaut

Tout comme toute autre fonction Python, les UDF peuvent avoir des paramètres par défaut. Dans Workbench, ceux-ci peuvent être définis directement en Python.

La hiérarchie est la suivante :
1. Paramètre en Python (lors de la définition de la fonction)
2. [Requête HTTPS](/core-concepts/run-udfs/run-small-udfs/) / Appel UDF avec [jeton partagé](/core-concepts/run-udfs/run-small-udfs/#token)

![Hiérarchie des paramètres par défaut](/img/workbench/udf-builder/code_editor/overview_default_params.png)

<details>
<summary>Exemple : Hiérarchie des paramètres par défaut</summary>

Commençons par une simple UDF :
```python
@fused.udf
def udf(my_default_param: float = 1.5):
    
    print(f"{my_default_param=}")
    return my_default_param
```

Dans Workbench, sans définir d'autre chose, nous obtiendrions `1.5` :

![Hiérarchie des paramètres par défaut](/img/workbench/udf-builder/code_editor/overview_default_params.png)

Maintenant, nous pouvons définir des paramètres par défaut dans l'interface utilisateur de la couche UDF :

<ReactPlayer playsinline={true} className="video__player" playing={false} muted={true} controls height="100%" url="https://fused-magic.s3.us-west-2.amazonaws.com/workbench/walkthrough-videos/docs_rewrite/code_editor_setting_default_params_in_UI_compressed3.mp4" width="100%" />

Dans ce cas, Workbench écrase le paramètre par défaut dans le code Python avec la valeur définie dans l'interface utilisateur :

![L'interface utilisateur de Workbench écrase les paramètres par défaut Python](/img/workbench/udf-builder/code_editor/workbench_overrides_default_value.png)

Et enfin, si vous appelez cette UDF via HTTPS / jeton partagé, alors le paramètre par défaut sera bien sûr écrasé par la valeur que vous fournissez :

![Écrasement en python](/img/workbench/udf-builder/code_editor/overwriting_in_python.png)

</details>

## Débogage

L'éditeur de code met en évidence les erreurs dans le code et affiche les journaux d'erreurs pour aider au débogage.

<ReactPlayer playsinline={true} className="video__player" playing={false} muted={true} controls height="100%" url="https://fused-magic.s3.us-west-2.amazonaws.com/workbench/walkthrough-videos/docs_rewrite/debug_code_editor_edit5.mp4" width="100%" />

## Profileur

Le constructeur d'UDF est livré avec un profileur intégré qui peut être utilisé pour analyser les performances d'un UDF.

Cela vous donne le temps d'exécution ligne par ligne dans l'UDF.

Remarque :
- Les valeurs ne sont disponibles que pour l'exécution actuelle de l'UDF.
- Exécuter le même UDF deux fois peut entraîner des temps d'exécution différents, surtout si vous appelez des [fonctions mises en cache](/core-concepts/cache/#caching-any-python-function-fusedcache) ou des [UDF mises en cache](/core-concepts/cache/#caching-a-udf).
- Lorsqu'une ligne est appelée plusieurs fois, le profileur affiche le temps total de tous les appels et le nombre de fois qu'elle a été appelée :

![profileur de plusieurs appels](/img/workbench/udf-builder/code_editor/profiler_multiple_hits.gif)


## Enregistrer un UDF

Les UDF affichent un astérisque (`*`) à côté de leur nom lorsque des modifications ont été apportées depuis la dernière sauvegarde.

Vous pouvez enregistrer un UDF de 2 manières :
- Cliquez sur 3 points -> "Enregistrer"
- `Cmd + S` (MacOS) / `Ctrl + S` (Win / Linux)

Cliquer sur l'icône "Enregistrer" sauvegarde l'état actuel de l'UDF sous les UDF de votre compte.

Si l'icône "Enregistrer" apparaît grisée, cela signifie que vous visualisez une version en lecture seule de l'UDF. Faites une copie pour créer une nouvelle version qui peut être modifiée et enregistrée.

![Icône Enregistrer](/img/save_icon.png)

## Auto, Tuiles et Unique (Vue, Paramètre)

Dans le constructeur d'UDF, les UDF peuvent être explicitement définis pour s'exécuter en tant que [Tuile ou Fichier](/tutorials/Geospatial%20with%20Fused/filetile/) - ou s'auto-sélectionner entre les deux si l'objet `bounds` est [typé](/tutorials/Geospatial%20with%20Fused/filetile/#bounds).

![Fichier](/img/workbench/udf-builder/file_tile.png)

## Module Utils [Héritage]

:::warning Le module Utils est obsolète
Il n'est disponible qu'en tant que fonctionnalité héritée (disponible à activer dans les [Préférences de Workbench](/workbench/preferences/)).
:::

Un UDF Fused peut importer des objets Python de son [module utils](/core-concepts/write/#utils-module) accompagnant, défini dans l'éditeur de code de l'onglet Utils. Vous pouvez importer des fonctions depuis celui-ci dans votre UDF avec `from utils import my_function`.

Voici un exemple dans une ancienne version de l'UDF public [Overture_Maps_example](https://github.com/fusedio/udfs/tree/d9f419dadf6267efc79f0ea2092a4dda0e22cb97/public/Overture_Maps_Example) :

```python showLineNumbers
# Ceci est une ancienne version du code à des fins de démonstration
@fused.udf
def udf(
    bounds: fused.types.Bounds,
    release: str = "2025-01-22-0",
):
    from utils import get_overture

    gdf = get_overture(
        bounds=bounds,
        release=release,
    )
    return gdf
```
![UDF Builder Utils](/img/workbench/udf-builder/utils.png)